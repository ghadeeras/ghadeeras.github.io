<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="origin-trial" content="AmO5B1uVFNjugHtJIPPGxlHEg3JZcZ6iyO11e+7bt55wkL38M1mZyzDdU5bFZ3NHwRsKDP94rJ0G4vcesZJtGQoAAABTeyJvcmlnaW4iOiJodHRwczovL2doYWRlZXJhcy5naXRodWIuaW86NDQzIiwiZmVhdHVyZSI6IldlYkdQVSIsImV4cGlyeSI6MTY1MjgzMTk5OX0=">
    <meta http-equiv="origin-trial" content="Ar2WeznfiWX5A5KwU5XHxqYHAszues0yCu43kut+rarQ8TOcwof17SvUnD2nO/Qc0U0f67xW8wfEUi+8PeaxDQQAAABTeyJvcmlnaW4iOiJodHRwczovL2doYWRlZXJhcy5naXRodWIuaW86NDQzIiwiZmVhdHVyZSI6IldlYkdQVSIsImV4cGlyeSI6MTY0MzE1NTE5OX0=">
    <title>Sculpting</title>
    <link type="text/css" rel="stylesheet" href="../css/ghadeeras.css" />
    <script type="module">
        import * as Sculpting from "../gen/sculpting/toy.js"
        Sculpting.init();
    </script>
</head>

<body>

    <div id="head">
        <div><a href="../index.html">Ghadeer's Playcloud</a></div>
    </div>

    <div id="content">

        <div id="side">

            <div class="section">
                <strong>Sculpting</strong>
            </div>

            <div>
                <p>
                    Graphics API: <span id="graphics-api">...</span>
                </p>
                <p>
                    <span>LOD: </span>
                    <button id="lod-inc">+</button>
                    <span id="lod">64</span>
                    <button id="lod-dec">-</button>
                </p>
                <p>
                    <div>Mouse Binding: 
                        <select id="mouse-binding" name="mouse-binding">
                            <option value="rotation" selected>Rotation</option>
                            <option value="focalRatio">Focal Ratio</option>
                            <option value="contourValue">Contour Value (Mouse Y)</option>
                            <option value="carving">Carving (Mouse Y)</option>
                            <option value="shininess">Shininess (Mouse Y)</option>
                            <option value="lightPosition">Light Position</option>
                            <option value="lightRadius">Light Radius (Mouse Y)</option>
                            <option value="fogginess">Fogginess (Mouse Y)</option>
                        </select>
                    </div>
                </p>
                <p>
                    <button id="export">Export as:</button>
                    <input id="file-name" type="text" value="Model" />
                    <br />
                    The button above will attempt to save two files with the extensions "gltf" and "bin". 
                </p>
                <p>
                    <button id="undo" style="width: 100%;">Undo / Redo</button>
                </p>
                <p>
                    <button id="reset-contour" style="width: 100%;">Reset Contour Value</button>
                </p>
            </div>

        </div>

        <div id="main">
            <div class="view">
                <canvas id="canvas-gl" width="640" height="640">
                    Your browser seems not to support HTML 5 Canvas!
                </canvas>
            </div>
        </div>

        <div id="other-side">

            <div class="section">
                <strong>Description</strong>
            </div>

            <div>
                <p>
                    This toy is meant to experiment with the idea of using the marching cubes algorithm / scalar field 
                    tessellation (see <a href="/pages/scalar-field.html">this other toy</a>) as means towards creating a simple 
                    sculpting tool.
                </p>
                <p>
                    The idea is to start from a simple scalar field (such as <i>f<sub>base</sub>(x, y, z) = x<sup>2</sup> + 
                    y<sup>2</sup> + z<sup>2</sup></i>) which when tessellated for some contour value <i>v</i> would give a base 
                    geometric shape, like a sphere. This can be thought of as the base "stone" from which the sculpture would 
                    be carved or even grown.
                </p>
                <p>
                    The act of carving is done by adding/subtracting another scalar field <i>c(x, y, z)</i>, representing the 
                    shape of the sculpting tool, to the current field at the point where the carving is performed. The 
                    magnitude of carving is determined by how much the user drags the pointer vertically (height/depth) and 
                    horizontally (breadth). The carving will be aligned with the surface normal at the carving point.
                </p>
                <p>
                    In the simplest case, if we do carve at a surface point <i>p<sub>c</sub> = (x<sub>c</sub>, y<sub>c</sub>, 
                    z<sub>c</sub>)</i>, the new scalar field would be:
                </p>
                <p><i>
                    f<sub>after</sub>(x, y, z) = <br /> f<sub>before</sub>(x, y, z) - c(x / m - x<sub>c</sub>, y / m - 
                    y<sub>c</sub>, z / m - z<sub>c</sub>)
                </i></p>
                <p>
                    where <i>m</i> is a value representing the magnitude of the carving. In a more general case, <i>x / m, 
                    y / m, z / m</i> would be replaced by some values <i>x<sub>m</sub>, y<sub>m</sub>, z<sub>m</sub></i> such 
                    that:
                </p>
                <p><i>
                    [x<sub>m</sub>, y<sub>m</sub>, z<sub>m</sub>] = [x, y, z] M <sup>-1</sup>
                </i></p>
                <p>
                    where <i>M</i> is a matrix that scales and orients the carving tool, and is a function of the desired
                    height/depth, breadth, and the normal at the surface point.  
                </p>
                <p>
                    A few interesting challenges were encountered in this experiment. For example, the scalar field of the
                    sculpting tool should be sampled at high resolution, then down sampled for lower resolutions while applying 
                    a filter to keep the carving as smooth as possible. Lower resolutions of the carving tool are used when the
                    magnitude of the carving is small. Another challenge is how to deform the scalar field of the carving tool
                    depending on the desired height/depth and breadth, which could be controlled independently.     
                </p>
                <p>
                    The end result is fun to play with, but I think it suffers from a few drawbacks that limit its 
                    practicality. For instance, the use of the marching cubes algorithm means one has only a limited space to 
                    work in. Once one grows the sculpture beyond that limit, its surface appears to rupture. In addition, it is 
                    at times hard to predict how the surface will change. That is because there is no visual cue about the 
                    scalar field value outside the surface of the sculpture. So, growing the sculpture at some places could 
                    cause some surfaces to appear out of thin air. 
                </p>
            </div>

        </div>

    </div>
</body>

</html>