<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="origin-trial" content="AmO5B1uVFNjugHtJIPPGxlHEg3JZcZ6iyO11e+7bt55wkL38M1mZyzDdU5bFZ3NHwRsKDP94rJ0G4vcesZJtGQoAAABTeyJvcmlnaW4iOiJodHRwczovL2doYWRlZXJhcy5naXRodWIuaW86NDQzIiwiZmVhdHVyZSI6IldlYkdQVSIsImV4cGlyeSI6MTY1MjgzMTk5OX0=">
    <meta http-equiv="origin-trial" content="Ar2WeznfiWX5A5KwU5XHxqYHAszues0yCu43kut+rarQ8TOcwof17SvUnD2nO/Qc0U0f67xW8wfEUi+8PeaxDQQAAABTeyJvcmlnaW4iOiJodHRwczovL2doYWRlZXJhcy5naXRodWIuaW86NDQzIiwiZmVhdHVyZSI6IldlYkdQVSIsImV4cGlyeSI6MTY0MzE1NTE5OX0=">
    <title>Gravity</title>
    <link type="text/css" rel="stylesheet" href="../css/ghadeeras.css" />
    <script type="importmap">
        {
            "imports" : {
                "ether" : "/ether/latest/index.js",
                "gear" : "/gear/latest/index.js",
                "languasaurus" : "/languasaurus/latest/index.js"
            }
        }
    </script>
    <script type="module">
        import * as Gravity from "../gen/gravity/toy.js"
        Gravity.init();
    </script>
</head>

<body>

    <div id="head">
        <div><a href="../index.html">Ghadeer's Playcloud</a></div>
    </div>

    <div id="content">

        <div id="side">

            <div class="section">
                <strong>Controls / Key Mappings</strong>
            </div>

            <div>
                <ul>
                    <li id="control-r">[R] Universe Rotation</li>
                    <li id="control-p">[P] Observer Position (on Z-axis)</li>
                    <li id="control-z">[Z] Zoom</li>
                    <li id="control-s">[S] Body Radius Scaling</li>
                    <li id="control-b">[B] Body Mass Pointedness</li>
                    <li id="control-g">[G] Gravity Constant</li>
                </ul>
            </div>

            <div class="section">
                <strong>Actions</strong>
            </div>

            <div>
                <p><button id="action-reset" style="width: 100%;">Reset Rendering Settings</button></p>
                <p><button id="action-pause" style="width: 100%;">Pause/Resume</button></p>
                <p><button id="action-collapse" style="width: 100%;">Random Collapse</button></p>
                <p><button id="action-kaboom" style="width: 100%;">Random Kaboom!</button></p>
            </div>

            <div class="section"></div>

            <div>
                <p>
                    <strong>WebGPU Status</strong>: <span id="gpu-status">&#x1F630; ...</span>
                </p>
            </div>

            <div>
                <p>
                    The source code of this simulation toy could be found in 
                    <a href="https://github.com/ghadeeras/ghadeeras.github.io/tree/master/src/gravity">
                        my GitHub repository
                    </a> 
                </p>
            </div>
        </div>

        <div id="main">
            <div class="view">
                <canvas id="canvas-gl" width="640" height="640" style="cursor: all-scroll;">
                    Your browser seems not to support HTML 5 Canvas!
                </canvas>
            </div>
        </div>

        <div id="other-side">

            <div class="section">
                <strong>Gravity Toy</strong>
            </div>

            <div>
                <p>
                    This is an example of a particle system implemented using WebGPU. It simulates gravity between "heavenly
                    bodies" of random masses and sizes using an arithmetically safe variation of Newton's laws of gravity; 
                    safe in the sense that no division-by-zero could occur. That is done by adding a safety margin to the 
                    distance between any pair of bodies when applying the laws. This provides an adequate approximation of 
                    how the gravitational field changes near or below the surface of these bodies. The margin is represented 
                    by the inversely-proportional parameter "Body Mass Pointedness".
                </p>
                <p>
                    At the moment, the number of these bodies is not configurable and is set to 16384 bodies. There is no
                    collision detection/simulation implemented. These bodies could move right through each other.
                </p>
                <p>
                    You could use the keyboard keys listed in the Controls/Key-Mappings section to select which parameter 
                    to control. You control the parameter by dragging the pointer across the canvas where the "universe" is 
                    rendered. You could also choose to reset these parameters, to pause the simulation, or to restart the 
                    simulation using the buttons in the Actions section.  
                </p>
            </div>

        </div>

    </div>
</body>

</html>