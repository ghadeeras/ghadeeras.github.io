<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1">
        <title>Gravity</title>
        <link type="text/css" rel="stylesheet" href="/index.css" />
    </style>
        <script type="module">
            import * as Gravity from "../gen/gravity/toy.js"
            import init from "../gen/initializer.js"
            init(Gravity);
        </script>
    </head>
    <body>
        <div class="menu">
            <div class="items">
                <div id="logo" title="Ghadeer's Playcloud"></div>
                <div id="controls-button" title="Controls"></div>
                <div id="about-button" title="About / Info"></div>
                <div id="monitor-button" title="Monitor"></div>
            </div>
            <div class="links">
                <div id="github" title="Fork me!"></div>
                <div id="linkedin" title="Contact me!"></div>
                <div id="mastodon" title="Follow me!"></div>
                <div id="youtube" title="Subscribe to my channel!"></div>
            </div>
        </div>
        <div class="tiles">
            <div style="width: 96.875%; height: 96.875%;">
                <canvas id="canvas" style="cursor: all-scroll; width: 100%; height: 100%;">
                    Your browser seems not to support HTML 5 Canvas!
                </canvas>
                <div id="monitor" class="hud top-right">
                    <div>
                        <table>
                            <tr><th>FPS</th><td><span id="freq-watch"></span>0</td></tr>
                            <tr><th>WebGPU Status</th><td><span id="gpu-status">&#x1F630; ...</span></td></tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div id="about" class="hud">
            <div>
                <h1>Gravity Toy</h1>
                <p>
                    This is an example of a particle system implemented using WebGPU. It simulates gravity between "heavenly
                    bodies" of random masses and sizes using an arithmetically safe variation of Newton's laws of gravity; 
                    safe in the sense that no division-by-zero could occur. That is done by adding a safety margin to the 
                    distance between any pair of bodies when applying the laws. This provides an adequate approximation of 
                    how the gravitational field changes near or below the surface of these bodies. The margin is represented 
                    by the inversely-proportional parameter "Body Mass Pointedness".
                </p>
                <p>
                    At the moment, the number of these bodies is not configurable and is set to 16384 bodies. There is no
                    collision detection/simulation implemented. These bodies could move right through each other.
                </p>
                <p>
                    You could use the keyboard keys listed in the Controls/Key-Mappings section to select which parameter 
                    to control. You control the parameter by dragging the pointer across the canvas where the "universe" is 
                    rendered. You could also choose to reset these parameters, to pause the simulation, or to restart the 
                    simulation using the buttons in the Actions section.  
                </p>
            </div>
        </div>
        <div id="controls" class="hud">
            <div>
                <h1>The Controls / Key Mappings</h1>
                <p>The following keys change the function of mouse-dragging:</p>
                <table>
                    <tr><td width="48px"><kbd id="control-r">R</kbd></td><td>Universe Rotation</td></tr>
                    <tr><td><kbd id="control-p">P</kbd></td><td>Observer Position (on Z-axis)</td></tr>
                    <tr><td><kbd id="control-z">Z</kbd></td><td>Zoom</td></tr>
                    <tr><td><kbd id="control-s">S</kbd></td><td>Body Radius Scaling</td></tr>
                    <tr><td><kbd id="control-b">B</kbd></td><td>Body Mass Pointedness</td></tr>
                    <tr><td><kbd id="control-g">G</kbd></td><td>Gravity Constant</td></tr>
                </table>
                <p>The following keys perform the specified actions:</p>
                <table>
                    <tr><td width="48px"><kbd id="control-1">1</kbd></td><td>Random Collapse</td></tr>
                    <tr><td><kbd id="control-2">2</kbd></td><td>Random Kaboom!</td></tr>
                    <tr><td><kbd id="control-3">3</kbd></td><td>Reset Rendering Settings</td></tr>
                    <tr><td><kbd id="control-4">4</kbd></td><td>Pause/Resume</td></tr>
                    <tr><td><kbd id="control-5">5</kbd></td><td>Start/Stop Recording</td></tr>
                    <tr><td><kbd id="control-left">&#x2B05;</kbd></td><td>Previous Renderer</td></tr>
                    <tr><td><kbd id="control-right">&#x27A1;</kbd></td><td>Next Renderer</td></tr>
                </table>
            </div>
        </div>
    </body>
</html>